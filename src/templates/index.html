<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Waiting media</title>
    <link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml">
    <style>
        table {
            font-family: Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        td, th {
            border: 1px solid #ddd;
            padding: 8px;
        }

        td.center, th.center {
            text-align: center;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #ddd;
        }

        th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #04AA6D;
            color: white;
        }

        img.icon {
            max-height: 15px;
            transform: translate(0%, 15%);
        }

        .row-group {
            writing-mode: vertical-rl;
            text-align: center;
            vertical-align: middle;
            transform: rotate(180deg);
            width: 30px;
            line-height: 30px;
            font-size: 20px;
            background-color: white;
        }

        tr.ready-delete, tr.ready-delete > td {
            background-color: #fa7a7a;
        }

        tr.releasing {
            background-color: #69d960;
        }

        tr.first-group {
            border-top: 2px solid black;
        }

        @media (prefers-color-scheme: dark) {
            body {
                color: #eee;
                background: #121212;
            }

            a:link {
                color: lightskyblue;
            }

            a:visited {
                color: #6d4b8d;
            }

            a:hover {
                color: #ffffff;
            }

            a:active {
                color: #ff4040;
                text-decoration: none;
                font-weight: normal;
            }

            tr:nth-child(even) {
                background-color: #303030;
            }

            tr:hover {
                background-color: #606060;
            }

            tr.first-group {
                border-top: 2px solid white;
            }

            img.bw-icon {
                filter: invert(1);
            }

            .row-group {
                background-color: #121212;
            }

            tr.ready-delete, tr.ready-delete > td {
                background-color: #872222;
            }

            tr.releasing {
                background-color: #568722;
            }
        }
    </style>
</head>
<body>
<table id="medias">
    <thead>
    <tr>
        <th class="center">User group</th>
        <th class="center"></th>
        <th class="center">Type</th>
        <th class="center">Name</th>
        <th class="center">Season</th>
        <th class="center">Count</th>
        <th class="center">Status</th>
        <th class="center">Links</th>
        <th class="center">ID</th>
    </tr>
    </thead>
    <tbody>
    {% for user_group, medias in media_data.items() %}
    {% for media in medias %}
    <tr class="{{ 'first-group ' if loop.index == 1 }}{{ 'ready-delete ' if user_group.id == -1 }}{{ 'releasing ' if media.status.name == 'RELEASING' }}">
        {% if loop.index == 1 %}
        <td class="row-group" rowspan="{{ medias | length }}">{{user_group.name}}</td>
        {% endif %}
        <td>{{ loop.index }}</td>
        <td>
            <img class="icon bw-icon" alt="{{ media.type.name }} icon" src="{{ url_for('static', filename=media.type.get_icon() )}}"/>
            {{ media.type.get_for_display(locale) or '' }}
        </td>
        <td>{{ media.name }}</td>
        <td class="center">{{ media.season_number or '' }}</td>
        <td class="center">{{ media.element_count or '' }}</td>
        <td class="center">{{ media.status.get_for_display(locale) or '' }}</td>
        <td class="center">
            {% if url_data[media.overseerr_id] is not none %}
            {% if url_data[media.overseerr_id].overseerr is not none %}
            <a href="{{url_data[media.overseerr_id].overseerr}}" target="_blank"><img class="icon" alt="Overseerr icon" src="{{ url_for('static', filename='overseerr.png' )}}"/></a>
            {% endif %}
            {% if url_data[media.overseerr_id].plex_web is not none %}
            <a href="{{url_data[media.overseerr_id].plex_web}}" target="_blank"><img class="icon" alt="Plex web icon" src="{{ url_for('static', filename='plex.png' )}}"/></a>
            {% endif %}
            {% endif %}
        </td>
        <td>{{ media.id }}</td>
    </tr>
    {% endfor %}
    {% endfor %}
    </tbody>
</table>
</body>
</html>