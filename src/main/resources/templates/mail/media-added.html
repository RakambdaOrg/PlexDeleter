<mjml xmlns:th="http://www.thymeleaf.org">
    <mj-head>
        <mj-title th:text="${mediaTitle}"/>
        <mj-attributes>
            <mj-all font-family="Helvetica, Arial, sans-serif"/>
            <mj-text font-size="14px" color="#ffffff" line-height="20px"/>
            <mj-section background-color="#141414" padding="20px"/>
        </mj-attributes>
        <mj-style>
            .link-style { color: #007bff; text-decoration: none; font-weight: bold; }
            .flag-icon { vertical-align: middle; margin-right: 8px; }
        </mj-style>
    </mj-head>
    <mj-body background-color="#000000">

        <mj-section th:if="${suggestAddRequirementId}" padding-bottom="10px">
            <mj-column width="100%">
                <mj-button th:href="${thymeleafService.getAddWatchMediaUrl(suggestAddRequirementId)}" background-color="#28a745" color="white" border-radius="4px">
                    <span th:text="#{mail.media.available.body.actions.requirement.add}"/>
                </mj-button>
            </mj-column>
        </mj-section>

        <mj-section th:if="${mediaPosterResourceName}" padding-bottom="0px">
            <mj-column width="100%">
                <mj-image th:src="|cid:${mediaPosterResourceName}|" alt="Media Poster" border-radius="8px" padding="0px"/>
            </mj-column>
        </mj-section>

        <mj-section>
            <mj-column width="100%">
                <mj-text align="center" padding-bottom="0px">
                    <h1 style="margin: 10px 0; color: #E50914; font-size: 28px;" th:text="${mediaTitle}"/>
                    <h2 style="margin: 0; color: #ffffff; font-size: 18px; font-weight: 300;" th:if="${mediaSeason}" th:text="${mediaSeason}"/>
                </mj-text>
                <mj-divider border-width="1px" border-color="#333" padding="20px 0"/>
                <mj-text align="center" font-size="16px" color="#ccc" th:text="${mediaSummary}"/>
            </mj-column>
        </mj-section>

        <mj-section padding-top="0px">
            <mj-column width="50%">
                <mj-text th:unless="${#strings.isEmpty(mediaReleaseDate)}">
                    <b style="color: #E50914;" th:text="#{mail.media.available.body.release-date}"/><br/>
                    <span th:text="${mediaReleaseDate}"/>
                </mj-text>
                <mj-text th:unless="${#lists.isEmpty(mediaGenres)}">
                    <b style="color: #E50914;" th:text="#{mail.media.available.body.genres}"/><br/>
                    <span th:each="genre, iter : ${mediaGenres}" th:text="${genre} + (${iter.last} ? '' : ', ')"/>
                </mj-text>
            </mj-column>
            <mj-column width="50%">
                <mj-text th:unless="${#strings.isEmpty(mediaDuration)}">
                    <b style="color: #E50914;" th:text="#{mail.media.available.body.length}"/><br/>
                    <span th:text="${mediaDuration}"/>
                </mj-text>
                <mj-text th:unless="${#lists.isEmpty(mediaResolutions)}">
                    <b style="color: #E50914;" th:text="#{mail.media.available.body.resolutions}"/><br/>
                    <span th:each="res : ${mediaResolutions}" th:text="${res}"/>
                </mj-text>
            </mj-column>
        </mj-section>

        <mj-section background-color="#1f1f1f" border-radius="8px">
            <mj-column width="50%">
                <mj-text th:unless="${#lists.isEmpty(mediaAudios)}">
                    <b style="color: #ffffff;" th:text="#{mail.media.available.body.audios}"/>
                    <div th:each="audio : ${mediaAudios}" style="padding-top: 5px;">
                        <img th:if="${audio.flagUrl() != null}" th:src="${audio.flagUrl()}" width="20" class="flag-icon"/>
                        <span th:text="#{${audio.translationKey()}}" style="font-size: 12px; color: #aaa;"/>
                    </div>
                </mj-text>
            </mj-column>
            <mj-column width="50%">
                <mj-text th:unless="${#lists.isEmpty(mediaSubtitles)}">
                    <b style="color: #ffffff;" th:text="#{mail.media.available.body.subtitles}"/>
                    <div th:each="sub : ${mediaSubtitles}" style="padding-top: 5px;">
                        <img th:if="${sub.flagUrl() != null}" th:src="${sub.flagUrl()}" width="20" class="flag-icon"/>
                        <span th:text="#{${sub.translationKey()}}" style="font-size: 12px; color: #aaa;"/>
                    </div>
                </mj-text>
            </mj-column>
        </mj-section>

        <mj-section th:unless="${#lists.isEmpty(mediaActors)}">
            <mj-column width="100%">
                <mj-text align="center">
                    <b style="color: #E50914;" th:text="#{mail.media.available.body.actors}"/><br/>
                    <span th:each="actor, iter : ${mediaActors}" th:text="${actor} + (${iter.last} ? '' : ' â€¢ ')" style="color: #aaa; font-size: 12px;"/>
                </mj-text>
            </mj-column>
        </mj-section>

        <mj-section padding-top="0px">
            <mj-column width="100%">
                <mj-text align="center">
                    <span th:each="provider : ${metadataProvidersInfo}" style="padding: 0 10px;">
                        <a th:href="${provider.url()}" th:text="${provider.name()}" class="link-style"/>
                    </span>
                </mj-text>
            </mj-column>
        </mj-section>

        <mj-section background-color="transparent">
            <mj-column width="100%">
                <mj-button background-color="#E50914" color="white" th:href="${thymeleafService.getOwnUrl()}" th:text="#{mail.footer.app-link}" border-radius="4px"/>
            </mj-column>
        </mj-section>

    </mj-body>
</mjml>